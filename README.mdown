Monolog - Logging for PHP 5.3
=============================

[![Build Status](https://secure.travis-ci.org/Seldaek/monolog.png)](http://travis-ci.org/Seldaek/monolog)

Usage
-----

    use Monolog\Logger;
    use Monolog\Handler\StreamHandler;

    // create a log channel
    $log = new Logger('name');
    $log->pushHandler(new StreamHandler('path/to/your.log', Logger::WARNING));

    // add records to the log
    $log->addWarning('Foo');
    $log->addError('Bar');

Core Concepts
-------------

Every [`Logger`](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Logger.php) instance has a channel (name) and a stack of handlers. Whenever you add a record to the logger, it traverses the handler stack. Each handler decides whether it handled fully the record, and if so, the propagation of the record ends there.

This allow for flexible logging setups, for example having a [`StreamHandler`](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/StreamHandler.php) at the bottom of the stack that will log anything to disk, and on top of that add a [`MailHandler`](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/MailHandler.php) that will send emails only when an error message is logged. Handlers also have a `bubble` property which define whether they block the record or not if they handled it. In this example, setting the `MailHandler`'s `$bubble` argument to true means that all records will propagate to the `StreamHandler`, even the errors that are handled by the `MailHandler`.

You can create many `Logger`s, each defining a channel (e.g.: db, request, router, ..) and each of them combining various handlers, which can be shared or not. The channel is reflected in the logs and allows you to easily see or filter records.

Each Handler also has a Formatter. A default one with settings that make sense will be created if you don't set one. The formatters normalize and format incoming records so that they can be used by the handlers to output useful information.

Custom severity levels are not available. Only six levels (debug, info, warning, error, critical, alert) are present for basic filtering purposes, but for sorting and other use cases that would require flexibility, you should add Processors to the Logger that can add extra information (tags, user ip, ..) to the records before they are handled.

Docs
====

**See the [`doc`](https://github.com/Seldaek/monolog/tree/master/doc) directory for more detailed documentation. The following is only a list of all parts that come with Monolog.**

Handlers
--------

- [_StreamHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/StreamHandler.php): Logs records into any php stream, use this for log files.
- [_RotatingFileHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/RotatingFileHandler.php): Logs records to a file and creates one logfile per day. It will also delete files older than `$maxFiles`. You should use [logrotate](http://linuxcommand.org/man_pages/logrotate8.html) for high profile setups though, this is just meant as a quick and dirty solution.
- [_FirePHPHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/FirePHPHandler.php): Handler for [FirePHP](http://www.firephp.org/), providing inline `console` messages within [FireBug](http://getfirebug.com/).
- [_ChromePHPHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/ChromePHPHandler.php): Handler for [ChromePHP](http://www.chromephp.com/), providing inline `console` messages within Chrome.
- [_NativeMailHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/NativeMailerHandler.php): Sends emails using PHP's [mail()](http://php.net/manual/en/function.mail.php) function.
- [_SwiftMailerHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/SwiftMailerHandler.php): Sends emails using a [`Swift_Mailer`](https://github.com/swiftmailer/swiftmailer/blob/master/lib/classes/Swift/Mailer.php) instance.
- [_SyslogHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/SyslogHandler.php): Logs records to the [syslog](http://php.net/manual/en/function.syslog.php).

Wrappers / Special Handlers
---------------------------

- [_FingersCrossedHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/FingersCrossedHandler.php): A very interesting wrapper. It takes a logger as parameter and will accumulate log records of all levels until a record exceeds the defined severity level. At which point it delivers all records, including those of lower severity, to the handler it wraps. This means that until an error actually happens you will not see anything in your logs, but when it happens you will have the full information, including debug and info records. This provides you with all the information you need, but only when you need it.
- [_NullHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/NullHandler.php): Any record it can handle will be thrown away. This can be used to put on top of an existing handler stack to disable it temporarily.
- [_BufferHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/BufferHandler.php): This handler will buffer all the log records it receives until `close()` is called at which point it will call `handleBatch()` on the handler it wraps with all the log messages at once. This is very useful to send an email with all records at once for example instead of having one mail for every log record.
- [_GroupHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/GroupHandler.php): This handler groups other handlers. Every record received is sent to all the handlers it is configured with.
- [_TestHandler_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/TestHandler.php): Used for testing, it records everything that is sent to it and has accessors to read out the information.

Formatters
----------

- [_LineFormatter_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Formatter/LineFormatter.php): Formats a log record into a one-line string.
- [_JsonFormatter_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Formatter/JsonFormatter.php): Encodes a log record into json.
- [_WildfireFormatter_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Formatter/WildfireFormatter.php): Used to format log records into the [Wildfire/FirePHP protocol](http://www.firephp.org/Wiki/Reference/Protocol), only useful for the [`FirePHPHandler`](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/FirePHPHandler.php).
- [_ChromePHPFormatter_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Formatter/ChromePHPFormatter.php): Used to format log records into the [ChromePHP](http://www.chromephp.com/) format, only useful for the [`ChromePHPHandler`](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Handler/ChromePHPHandler.php).

Processors
----------

- [_IntrospectionProcessor_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Processor/IntrospectionProcessor.php): Adds the line/file/class/method from which the log call originated.
- [_WebProcessor_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Processor/WebProcessor.php): Adds the current request URI, request method and client IP to a log record.
- [_MemoryUsageProcessor_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Processor/MemoryUsageProcessor.php): Adds the current memory usage to a log record.
- [_MemoryPeakUsageProcessor_](https://github.com/Seldaek/monolog/blob/master/src/Monolog/Processor/MemoryPeakUsageProcessor.php): Adds the peak memory usage to a log record.

About
=====

Requirements
------------

- Any flavor of PHP 5.3 should do
- [optional] [PHPUnit](https://github.com/sebastianbergmann/phpunit) 3.5+ to execute the test suite (`phpunit --version`)

Submitting bugs and feature requests
------------------------------------

Bugs and feature request are tracked on [GitHub](https://github.com/Seldaek/monolog/issues)

Author
------

Jordi Boggiano - <j.boggiano@seld.be> - <http://twitter.com/seldaek><br />
See also the list of [contributors](https://github.com/Seldaek/monolog/contributors) which participated in this project.

License
-------

Monolog is licensed under the [MIT License](http://en.wikipedia.org/wiki/MIT_License) - see the [`LICENSE`](https://github.com/Seldaek/monolog/blob/master/LICENSE) file for details

Acknowledgements
----------------

This library is heavily inspired by Python's [Logbook](http://packages.python.org/Logbook/) library, although most concepts have been adjusted to fit to the PHP world.
